// Code generated by ent, DO NOT EDIT.

package ent

import (
	"context"
	"errors"
	"fmt"
	"sync"
	"time"

	"entgo.io/ent"
	"entgo.io/ent/dialect/sql"
	"github.com/go-tangra/go-tangra-sharing/internal/data/ent/emailtemplate"
	"github.com/go-tangra/go-tangra-sharing/internal/data/ent/predicate"
	"github.com/go-tangra/go-tangra-sharing/internal/data/ent/sharedlink"
	"github.com/go-tangra/go-tangra-sharing/internal/data/ent/sharepolicy"
)

const (
	// Operation types.
	OpCreate    = ent.OpCreate
	OpDelete    = ent.OpDelete
	OpDeleteOne = ent.OpDeleteOne
	OpUpdate    = ent.OpUpdate
	OpUpdateOne = ent.OpUpdateOne

	// Node types.
	TypeEmailTemplate = "EmailTemplate"
	TypeSharePolicy   = "SharePolicy"
	TypeSharedLink    = "SharedLink"
)

// EmailTemplateMutation represents an operation that mutates the EmailTemplate nodes in the graph.
type EmailTemplateMutation struct {
	config
	op            Op
	typ           string
	id            *string
	create_by     *uint32
	addcreate_by  *int32
	update_by     *uint32
	addupdate_by  *int32
	create_time   *time.Time
	update_time   *time.Time
	delete_time   *time.Time
	tenant_id     *uint32
	addtenant_id  *int32
	name          *string
	subject       *string
	html_body     *string
	is_default    *bool
	clearedFields map[string]struct{}
	done          bool
	oldValue      func(context.Context) (*EmailTemplate, error)
	predicates    []predicate.EmailTemplate
}

var _ ent.Mutation = (*EmailTemplateMutation)(nil)

// emailtemplateOption allows management of the mutation configuration using functional options.
type emailtemplateOption func(*EmailTemplateMutation)

// newEmailTemplateMutation creates new mutation for the EmailTemplate entity.
func newEmailTemplateMutation(c config, op Op, opts ...emailtemplateOption) *EmailTemplateMutation {
	m := &EmailTemplateMutation{
		config:        c,
		op:            op,
		typ:           TypeEmailTemplate,
		clearedFields: make(map[string]struct{}),
	}
	for _, opt := range opts {
		opt(m)
	}
	return m
}

// withEmailTemplateID sets the ID field of the mutation.
func withEmailTemplateID(id string) emailtemplateOption {
	return func(m *EmailTemplateMutation) {
		var (
			err   error
			once  sync.Once
			value *EmailTemplate
		)
		m.oldValue = func(ctx context.Context) (*EmailTemplate, error) {
			once.Do(func() {
				if m.done {
					err = errors.New("querying old values post mutation is not allowed")
				} else {
					value, err = m.Client().EmailTemplate.Get(ctx, id)
				}
			})
			return value, err
		}
		m.id = &id
	}
}

// withEmailTemplate sets the old EmailTemplate of the mutation.
func withEmailTemplate(node *EmailTemplate) emailtemplateOption {
	return func(m *EmailTemplateMutation) {
		m.oldValue = func(context.Context) (*EmailTemplate, error) {
			return node, nil
		}
		m.id = &node.ID
	}
}

// Client returns a new `ent.Client` from the mutation. If the mutation was
// executed in a transaction (ent.Tx), a transactional client is returned.
func (m EmailTemplateMutation) Client() *Client {
	client := &Client{config: m.config}
	client.init()
	return client
}

// Tx returns an `ent.Tx` for mutations that were executed in transactions;
// it returns an error otherwise.
func (m EmailTemplateMutation) Tx() (*Tx, error) {
	if _, ok := m.driver.(*txDriver); !ok {
		return nil, errors.New("ent: mutation is not running in a transaction")
	}
	tx := &Tx{config: m.config}
	tx.init()
	return tx, nil
}

// SetID sets the value of the id field. Note that this
// operation is only accepted on creation of EmailTemplate entities.
func (m *EmailTemplateMutation) SetID(id string) {
	m.id = &id
}

// ID returns the ID value in the mutation. Note that the ID is only available
// if it was provided to the builder or after it was returned from the database.
func (m *EmailTemplateMutation) ID() (id string, exists bool) {
	if m.id == nil {
		return
	}
	return *m.id, true
}

// IDs queries the database and returns the entity ids that match the mutation's predicate.
// That means, if the mutation is applied within a transaction with an isolation level such
// as sql.LevelSerializable, the returned ids match the ids of the rows that will be updated
// or updated by the mutation.
func (m *EmailTemplateMutation) IDs(ctx context.Context) ([]string, error) {
	switch {
	case m.op.Is(OpUpdateOne | OpDeleteOne):
		id, exists := m.ID()
		if exists {
			return []string{id}, nil
		}
		fallthrough
	case m.op.Is(OpUpdate | OpDelete):
		return m.Client().EmailTemplate.Query().Where(m.predicates...).IDs(ctx)
	default:
		return nil, fmt.Errorf("IDs is not allowed on %s operations", m.op)
	}
}

// SetCreateBy sets the "create_by" field.
func (m *EmailTemplateMutation) SetCreateBy(u uint32) {
	m.create_by = &u
	m.addcreate_by = nil
}

// CreateBy returns the value of the "create_by" field in the mutation.
func (m *EmailTemplateMutation) CreateBy() (r uint32, exists bool) {
	v := m.create_by
	if v == nil {
		return
	}
	return *v, true
}

// OldCreateBy returns the old "create_by" field's value of the EmailTemplate entity.
// If the EmailTemplate object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *EmailTemplateMutation) OldCreateBy(ctx context.Context) (v *uint32, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldCreateBy is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldCreateBy requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldCreateBy: %w", err)
	}
	return oldValue.CreateBy, nil
}

// AddCreateBy adds u to the "create_by" field.
func (m *EmailTemplateMutation) AddCreateBy(u int32) {
	if m.addcreate_by != nil {
		*m.addcreate_by += u
	} else {
		m.addcreate_by = &u
	}
}

// AddedCreateBy returns the value that was added to the "create_by" field in this mutation.
func (m *EmailTemplateMutation) AddedCreateBy() (r int32, exists bool) {
	v := m.addcreate_by
	if v == nil {
		return
	}
	return *v, true
}

// ClearCreateBy clears the value of the "create_by" field.
func (m *EmailTemplateMutation) ClearCreateBy() {
	m.create_by = nil
	m.addcreate_by = nil
	m.clearedFields[emailtemplate.FieldCreateBy] = struct{}{}
}

// CreateByCleared returns if the "create_by" field was cleared in this mutation.
func (m *EmailTemplateMutation) CreateByCleared() bool {
	_, ok := m.clearedFields[emailtemplate.FieldCreateBy]
	return ok
}

// ResetCreateBy resets all changes to the "create_by" field.
func (m *EmailTemplateMutation) ResetCreateBy() {
	m.create_by = nil
	m.addcreate_by = nil
	delete(m.clearedFields, emailtemplate.FieldCreateBy)
}

// SetUpdateBy sets the "update_by" field.
func (m *EmailTemplateMutation) SetUpdateBy(u uint32) {
	m.update_by = &u
	m.addupdate_by = nil
}

// UpdateBy returns the value of the "update_by" field in the mutation.
func (m *EmailTemplateMutation) UpdateBy() (r uint32, exists bool) {
	v := m.update_by
	if v == nil {
		return
	}
	return *v, true
}

// OldUpdateBy returns the old "update_by" field's value of the EmailTemplate entity.
// If the EmailTemplate object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *EmailTemplateMutation) OldUpdateBy(ctx context.Context) (v *uint32, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldUpdateBy is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldUpdateBy requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldUpdateBy: %w", err)
	}
	return oldValue.UpdateBy, nil
}

// AddUpdateBy adds u to the "update_by" field.
func (m *EmailTemplateMutation) AddUpdateBy(u int32) {
	if m.addupdate_by != nil {
		*m.addupdate_by += u
	} else {
		m.addupdate_by = &u
	}
}

// AddedUpdateBy returns the value that was added to the "update_by" field in this mutation.
func (m *EmailTemplateMutation) AddedUpdateBy() (r int32, exists bool) {
	v := m.addupdate_by
	if v == nil {
		return
	}
	return *v, true
}

// ClearUpdateBy clears the value of the "update_by" field.
func (m *EmailTemplateMutation) ClearUpdateBy() {
	m.update_by = nil
	m.addupdate_by = nil
	m.clearedFields[emailtemplate.FieldUpdateBy] = struct{}{}
}

// UpdateByCleared returns if the "update_by" field was cleared in this mutation.
func (m *EmailTemplateMutation) UpdateByCleared() bool {
	_, ok := m.clearedFields[emailtemplate.FieldUpdateBy]
	return ok
}

// ResetUpdateBy resets all changes to the "update_by" field.
func (m *EmailTemplateMutation) ResetUpdateBy() {
	m.update_by = nil
	m.addupdate_by = nil
	delete(m.clearedFields, emailtemplate.FieldUpdateBy)
}

// SetCreateTime sets the "create_time" field.
func (m *EmailTemplateMutation) SetCreateTime(t time.Time) {
	m.create_time = &t
}

// CreateTime returns the value of the "create_time" field in the mutation.
func (m *EmailTemplateMutation) CreateTime() (r time.Time, exists bool) {
	v := m.create_time
	if v == nil {
		return
	}
	return *v, true
}

// OldCreateTime returns the old "create_time" field's value of the EmailTemplate entity.
// If the EmailTemplate object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *EmailTemplateMutation) OldCreateTime(ctx context.Context) (v *time.Time, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldCreateTime is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldCreateTime requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldCreateTime: %w", err)
	}
	return oldValue.CreateTime, nil
}

// ClearCreateTime clears the value of the "create_time" field.
func (m *EmailTemplateMutation) ClearCreateTime() {
	m.create_time = nil
	m.clearedFields[emailtemplate.FieldCreateTime] = struct{}{}
}

// CreateTimeCleared returns if the "create_time" field was cleared in this mutation.
func (m *EmailTemplateMutation) CreateTimeCleared() bool {
	_, ok := m.clearedFields[emailtemplate.FieldCreateTime]
	return ok
}

// ResetCreateTime resets all changes to the "create_time" field.
func (m *EmailTemplateMutation) ResetCreateTime() {
	m.create_time = nil
	delete(m.clearedFields, emailtemplate.FieldCreateTime)
}

// SetUpdateTime sets the "update_time" field.
func (m *EmailTemplateMutation) SetUpdateTime(t time.Time) {
	m.update_time = &t
}

// UpdateTime returns the value of the "update_time" field in the mutation.
func (m *EmailTemplateMutation) UpdateTime() (r time.Time, exists bool) {
	v := m.update_time
	if v == nil {
		return
	}
	return *v, true
}

// OldUpdateTime returns the old "update_time" field's value of the EmailTemplate entity.
// If the EmailTemplate object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *EmailTemplateMutation) OldUpdateTime(ctx context.Context) (v *time.Time, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldUpdateTime is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldUpdateTime requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldUpdateTime: %w", err)
	}
	return oldValue.UpdateTime, nil
}

// ClearUpdateTime clears the value of the "update_time" field.
func (m *EmailTemplateMutation) ClearUpdateTime() {
	m.update_time = nil
	m.clearedFields[emailtemplate.FieldUpdateTime] = struct{}{}
}

// UpdateTimeCleared returns if the "update_time" field was cleared in this mutation.
func (m *EmailTemplateMutation) UpdateTimeCleared() bool {
	_, ok := m.clearedFields[emailtemplate.FieldUpdateTime]
	return ok
}

// ResetUpdateTime resets all changes to the "update_time" field.
func (m *EmailTemplateMutation) ResetUpdateTime() {
	m.update_time = nil
	delete(m.clearedFields, emailtemplate.FieldUpdateTime)
}

// SetDeleteTime sets the "delete_time" field.
func (m *EmailTemplateMutation) SetDeleteTime(t time.Time) {
	m.delete_time = &t
}

// DeleteTime returns the value of the "delete_time" field in the mutation.
func (m *EmailTemplateMutation) DeleteTime() (r time.Time, exists bool) {
	v := m.delete_time
	if v == nil {
		return
	}
	return *v, true
}

// OldDeleteTime returns the old "delete_time" field's value of the EmailTemplate entity.
// If the EmailTemplate object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *EmailTemplateMutation) OldDeleteTime(ctx context.Context) (v *time.Time, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldDeleteTime is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldDeleteTime requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldDeleteTime: %w", err)
	}
	return oldValue.DeleteTime, nil
}

// ClearDeleteTime clears the value of the "delete_time" field.
func (m *EmailTemplateMutation) ClearDeleteTime() {
	m.delete_time = nil
	m.clearedFields[emailtemplate.FieldDeleteTime] = struct{}{}
}

// DeleteTimeCleared returns if the "delete_time" field was cleared in this mutation.
func (m *EmailTemplateMutation) DeleteTimeCleared() bool {
	_, ok := m.clearedFields[emailtemplate.FieldDeleteTime]
	return ok
}

// ResetDeleteTime resets all changes to the "delete_time" field.
func (m *EmailTemplateMutation) ResetDeleteTime() {
	m.delete_time = nil
	delete(m.clearedFields, emailtemplate.FieldDeleteTime)
}

// SetTenantID sets the "tenant_id" field.
func (m *EmailTemplateMutation) SetTenantID(u uint32) {
	m.tenant_id = &u
	m.addtenant_id = nil
}

// TenantID returns the value of the "tenant_id" field in the mutation.
func (m *EmailTemplateMutation) TenantID() (r uint32, exists bool) {
	v := m.tenant_id
	if v == nil {
		return
	}
	return *v, true
}

// OldTenantID returns the old "tenant_id" field's value of the EmailTemplate entity.
// If the EmailTemplate object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *EmailTemplateMutation) OldTenantID(ctx context.Context) (v *uint32, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldTenantID is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldTenantID requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldTenantID: %w", err)
	}
	return oldValue.TenantID, nil
}

// AddTenantID adds u to the "tenant_id" field.
func (m *EmailTemplateMutation) AddTenantID(u int32) {
	if m.addtenant_id != nil {
		*m.addtenant_id += u
	} else {
		m.addtenant_id = &u
	}
}

// AddedTenantID returns the value that was added to the "tenant_id" field in this mutation.
func (m *EmailTemplateMutation) AddedTenantID() (r int32, exists bool) {
	v := m.addtenant_id
	if v == nil {
		return
	}
	return *v, true
}

// ClearTenantID clears the value of the "tenant_id" field.
func (m *EmailTemplateMutation) ClearTenantID() {
	m.tenant_id = nil
	m.addtenant_id = nil
	m.clearedFields[emailtemplate.FieldTenantID] = struct{}{}
}

// TenantIDCleared returns if the "tenant_id" field was cleared in this mutation.
func (m *EmailTemplateMutation) TenantIDCleared() bool {
	_, ok := m.clearedFields[emailtemplate.FieldTenantID]
	return ok
}

// ResetTenantID resets all changes to the "tenant_id" field.
func (m *EmailTemplateMutation) ResetTenantID() {
	m.tenant_id = nil
	m.addtenant_id = nil
	delete(m.clearedFields, emailtemplate.FieldTenantID)
}

// SetName sets the "name" field.
func (m *EmailTemplateMutation) SetName(s string) {
	m.name = &s
}

// Name returns the value of the "name" field in the mutation.
func (m *EmailTemplateMutation) Name() (r string, exists bool) {
	v := m.name
	if v == nil {
		return
	}
	return *v, true
}

// OldName returns the old "name" field's value of the EmailTemplate entity.
// If the EmailTemplate object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *EmailTemplateMutation) OldName(ctx context.Context) (v string, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldName is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldName requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldName: %w", err)
	}
	return oldValue.Name, nil
}

// ResetName resets all changes to the "name" field.
func (m *EmailTemplateMutation) ResetName() {
	m.name = nil
}

// SetSubject sets the "subject" field.
func (m *EmailTemplateMutation) SetSubject(s string) {
	m.subject = &s
}

// Subject returns the value of the "subject" field in the mutation.
func (m *EmailTemplateMutation) Subject() (r string, exists bool) {
	v := m.subject
	if v == nil {
		return
	}
	return *v, true
}

// OldSubject returns the old "subject" field's value of the EmailTemplate entity.
// If the EmailTemplate object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *EmailTemplateMutation) OldSubject(ctx context.Context) (v string, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldSubject is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldSubject requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldSubject: %w", err)
	}
	return oldValue.Subject, nil
}

// ResetSubject resets all changes to the "subject" field.
func (m *EmailTemplateMutation) ResetSubject() {
	m.subject = nil
}

// SetHTMLBody sets the "html_body" field.
func (m *EmailTemplateMutation) SetHTMLBody(s string) {
	m.html_body = &s
}

// HTMLBody returns the value of the "html_body" field in the mutation.
func (m *EmailTemplateMutation) HTMLBody() (r string, exists bool) {
	v := m.html_body
	if v == nil {
		return
	}
	return *v, true
}

// OldHTMLBody returns the old "html_body" field's value of the EmailTemplate entity.
// If the EmailTemplate object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *EmailTemplateMutation) OldHTMLBody(ctx context.Context) (v string, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldHTMLBody is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldHTMLBody requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldHTMLBody: %w", err)
	}
	return oldValue.HTMLBody, nil
}

// ResetHTMLBody resets all changes to the "html_body" field.
func (m *EmailTemplateMutation) ResetHTMLBody() {
	m.html_body = nil
}

// SetIsDefault sets the "is_default" field.
func (m *EmailTemplateMutation) SetIsDefault(b bool) {
	m.is_default = &b
}

// IsDefault returns the value of the "is_default" field in the mutation.
func (m *EmailTemplateMutation) IsDefault() (r bool, exists bool) {
	v := m.is_default
	if v == nil {
		return
	}
	return *v, true
}

// OldIsDefault returns the old "is_default" field's value of the EmailTemplate entity.
// If the EmailTemplate object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *EmailTemplateMutation) OldIsDefault(ctx context.Context) (v bool, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldIsDefault is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldIsDefault requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldIsDefault: %w", err)
	}
	return oldValue.IsDefault, nil
}

// ResetIsDefault resets all changes to the "is_default" field.
func (m *EmailTemplateMutation) ResetIsDefault() {
	m.is_default = nil
}

// Where appends a list predicates to the EmailTemplateMutation builder.
func (m *EmailTemplateMutation) Where(ps ...predicate.EmailTemplate) {
	m.predicates = append(m.predicates, ps...)
}

// WhereP appends storage-level predicates to the EmailTemplateMutation builder. Using this method,
// users can use type-assertion to append predicates that do not depend on any generated package.
func (m *EmailTemplateMutation) WhereP(ps ...func(*sql.Selector)) {
	p := make([]predicate.EmailTemplate, len(ps))
	for i := range ps {
		p[i] = ps[i]
	}
	m.Where(p...)
}

// Op returns the operation name.
func (m *EmailTemplateMutation) Op() Op {
	return m.op
}

// SetOp allows setting the mutation operation.
func (m *EmailTemplateMutation) SetOp(op Op) {
	m.op = op
}

// Type returns the node type of this mutation (EmailTemplate).
func (m *EmailTemplateMutation) Type() string {
	return m.typ
}

// Fields returns all fields that were changed during this mutation. Note that in
// order to get all numeric fields that were incremented/decremented, call
// AddedFields().
func (m *EmailTemplateMutation) Fields() []string {
	fields := make([]string, 0, 10)
	if m.create_by != nil {
		fields = append(fields, emailtemplate.FieldCreateBy)
	}
	if m.update_by != nil {
		fields = append(fields, emailtemplate.FieldUpdateBy)
	}
	if m.create_time != nil {
		fields = append(fields, emailtemplate.FieldCreateTime)
	}
	if m.update_time != nil {
		fields = append(fields, emailtemplate.FieldUpdateTime)
	}
	if m.delete_time != nil {
		fields = append(fields, emailtemplate.FieldDeleteTime)
	}
	if m.tenant_id != nil {
		fields = append(fields, emailtemplate.FieldTenantID)
	}
	if m.name != nil {
		fields = append(fields, emailtemplate.FieldName)
	}
	if m.subject != nil {
		fields = append(fields, emailtemplate.FieldSubject)
	}
	if m.html_body != nil {
		fields = append(fields, emailtemplate.FieldHTMLBody)
	}
	if m.is_default != nil {
		fields = append(fields, emailtemplate.FieldIsDefault)
	}
	return fields
}

// Field returns the value of a field with the given name. The second boolean
// return value indicates that this field was not set, or was not defined in the
// schema.
func (m *EmailTemplateMutation) Field(name string) (ent.Value, bool) {
	switch name {
	case emailtemplate.FieldCreateBy:
		return m.CreateBy()
	case emailtemplate.FieldUpdateBy:
		return m.UpdateBy()
	case emailtemplate.FieldCreateTime:
		return m.CreateTime()
	case emailtemplate.FieldUpdateTime:
		return m.UpdateTime()
	case emailtemplate.FieldDeleteTime:
		return m.DeleteTime()
	case emailtemplate.FieldTenantID:
		return m.TenantID()
	case emailtemplate.FieldName:
		return m.Name()
	case emailtemplate.FieldSubject:
		return m.Subject()
	case emailtemplate.FieldHTMLBody:
		return m.HTMLBody()
	case emailtemplate.FieldIsDefault:
		return m.IsDefault()
	}
	return nil, false
}

// OldField returns the old value of the field from the database. An error is
// returned if the mutation operation is not UpdateOne, or the query to the
// database failed.
func (m *EmailTemplateMutation) OldField(ctx context.Context, name string) (ent.Value, error) {
	switch name {
	case emailtemplate.FieldCreateBy:
		return m.OldCreateBy(ctx)
	case emailtemplate.FieldUpdateBy:
		return m.OldUpdateBy(ctx)
	case emailtemplate.FieldCreateTime:
		return m.OldCreateTime(ctx)
	case emailtemplate.FieldUpdateTime:
		return m.OldUpdateTime(ctx)
	case emailtemplate.FieldDeleteTime:
		return m.OldDeleteTime(ctx)
	case emailtemplate.FieldTenantID:
		return m.OldTenantID(ctx)
	case emailtemplate.FieldName:
		return m.OldName(ctx)
	case emailtemplate.FieldSubject:
		return m.OldSubject(ctx)
	case emailtemplate.FieldHTMLBody:
		return m.OldHTMLBody(ctx)
	case emailtemplate.FieldIsDefault:
		return m.OldIsDefault(ctx)
	}
	return nil, fmt.Errorf("unknown EmailTemplate field %s", name)
}

// SetField sets the value of a field with the given name. It returns an error if
// the field is not defined in the schema, or if the type mismatched the field
// type.
func (m *EmailTemplateMutation) SetField(name string, value ent.Value) error {
	switch name {
	case emailtemplate.FieldCreateBy:
		v, ok := value.(uint32)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetCreateBy(v)
		return nil
	case emailtemplate.FieldUpdateBy:
		v, ok := value.(uint32)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetUpdateBy(v)
		return nil
	case emailtemplate.FieldCreateTime:
		v, ok := value.(time.Time)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetCreateTime(v)
		return nil
	case emailtemplate.FieldUpdateTime:
		v, ok := value.(time.Time)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetUpdateTime(v)
		return nil
	case emailtemplate.FieldDeleteTime:
		v, ok := value.(time.Time)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetDeleteTime(v)
		return nil
	case emailtemplate.FieldTenantID:
		v, ok := value.(uint32)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetTenantID(v)
		return nil
	case emailtemplate.FieldName:
		v, ok := value.(string)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetName(v)
		return nil
	case emailtemplate.FieldSubject:
		v, ok := value.(string)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetSubject(v)
		return nil
	case emailtemplate.FieldHTMLBody:
		v, ok := value.(string)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetHTMLBody(v)
		return nil
	case emailtemplate.FieldIsDefault:
		v, ok := value.(bool)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetIsDefault(v)
		return nil
	}
	return fmt.Errorf("unknown EmailTemplate field %s", name)
}

// AddedFields returns all numeric fields that were incremented/decremented during
// this mutation.
func (m *EmailTemplateMutation) AddedFields() []string {
	var fields []string
	if m.addcreate_by != nil {
		fields = append(fields, emailtemplate.FieldCreateBy)
	}
	if m.addupdate_by != nil {
		fields = append(fields, emailtemplate.FieldUpdateBy)
	}
	if m.addtenant_id != nil {
		fields = append(fields, emailtemplate.FieldTenantID)
	}
	return fields
}

// AddedField returns the numeric value that was incremented/decremented on a field
// with the given name. The second boolean return value indicates that this field
// was not set, or was not defined in the schema.
func (m *EmailTemplateMutation) AddedField(name string) (ent.Value, bool) {
	switch name {
	case emailtemplate.FieldCreateBy:
		return m.AddedCreateBy()
	case emailtemplate.FieldUpdateBy:
		return m.AddedUpdateBy()
	case emailtemplate.FieldTenantID:
		return m.AddedTenantID()
	}
	return nil, false
}

// AddField adds the value to the field with the given name. It returns an error if
// the field is not defined in the schema, or if the type mismatched the field
// type.
func (m *EmailTemplateMutation) AddField(name string, value ent.Value) error {
	switch name {
	case emailtemplate.FieldCreateBy:
		v, ok := value.(int32)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.AddCreateBy(v)
		return nil
	case emailtemplate.FieldUpdateBy:
		v, ok := value.(int32)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.AddUpdateBy(v)
		return nil
	case emailtemplate.FieldTenantID:
		v, ok := value.(int32)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.AddTenantID(v)
		return nil
	}
	return fmt.Errorf("unknown EmailTemplate numeric field %s", name)
}

// ClearedFields returns all nullable fields that were cleared during this
// mutation.
func (m *EmailTemplateMutation) ClearedFields() []string {
	var fields []string
	if m.FieldCleared(emailtemplate.FieldCreateBy) {
		fields = append(fields, emailtemplate.FieldCreateBy)
	}
	if m.FieldCleared(emailtemplate.FieldUpdateBy) {
		fields = append(fields, emailtemplate.FieldUpdateBy)
	}
	if m.FieldCleared(emailtemplate.FieldCreateTime) {
		fields = append(fields, emailtemplate.FieldCreateTime)
	}
	if m.FieldCleared(emailtemplate.FieldUpdateTime) {
		fields = append(fields, emailtemplate.FieldUpdateTime)
	}
	if m.FieldCleared(emailtemplate.FieldDeleteTime) {
		fields = append(fields, emailtemplate.FieldDeleteTime)
	}
	if m.FieldCleared(emailtemplate.FieldTenantID) {
		fields = append(fields, emailtemplate.FieldTenantID)
	}
	return fields
}

// FieldCleared returns a boolean indicating if a field with the given name was
// cleared in this mutation.
func (m *EmailTemplateMutation) FieldCleared(name string) bool {
	_, ok := m.clearedFields[name]
	return ok
}

// ClearField clears the value of the field with the given name. It returns an
// error if the field is not defined in the schema.
func (m *EmailTemplateMutation) ClearField(name string) error {
	switch name {
	case emailtemplate.FieldCreateBy:
		m.ClearCreateBy()
		return nil
	case emailtemplate.FieldUpdateBy:
		m.ClearUpdateBy()
		return nil
	case emailtemplate.FieldCreateTime:
		m.ClearCreateTime()
		return nil
	case emailtemplate.FieldUpdateTime:
		m.ClearUpdateTime()
		return nil
	case emailtemplate.FieldDeleteTime:
		m.ClearDeleteTime()
		return nil
	case emailtemplate.FieldTenantID:
		m.ClearTenantID()
		return nil
	}
	return fmt.Errorf("unknown EmailTemplate nullable field %s", name)
}

// ResetField resets all changes in the mutation for the field with the given name.
// It returns an error if the field is not defined in the schema.
func (m *EmailTemplateMutation) ResetField(name string) error {
	switch name {
	case emailtemplate.FieldCreateBy:
		m.ResetCreateBy()
		return nil
	case emailtemplate.FieldUpdateBy:
		m.ResetUpdateBy()
		return nil
	case emailtemplate.FieldCreateTime:
		m.ResetCreateTime()
		return nil
	case emailtemplate.FieldUpdateTime:
		m.ResetUpdateTime()
		return nil
	case emailtemplate.FieldDeleteTime:
		m.ResetDeleteTime()
		return nil
	case emailtemplate.FieldTenantID:
		m.ResetTenantID()
		return nil
	case emailtemplate.FieldName:
		m.ResetName()
		return nil
	case emailtemplate.FieldSubject:
		m.ResetSubject()
		return nil
	case emailtemplate.FieldHTMLBody:
		m.ResetHTMLBody()
		return nil
	case emailtemplate.FieldIsDefault:
		m.ResetIsDefault()
		return nil
	}
	return fmt.Errorf("unknown EmailTemplate field %s", name)
}

// AddedEdges returns all edge names that were set/added in this mutation.
func (m *EmailTemplateMutation) AddedEdges() []string {
	edges := make([]string, 0, 0)
	return edges
}

// AddedIDs returns all IDs (to other nodes) that were added for the given edge
// name in this mutation.
func (m *EmailTemplateMutation) AddedIDs(name string) []ent.Value {
	return nil
}

// RemovedEdges returns all edge names that were removed in this mutation.
func (m *EmailTemplateMutation) RemovedEdges() []string {
	edges := make([]string, 0, 0)
	return edges
}

// RemovedIDs returns all IDs (to other nodes) that were removed for the edge with
// the given name in this mutation.
func (m *EmailTemplateMutation) RemovedIDs(name string) []ent.Value {
	return nil
}

// ClearedEdges returns all edge names that were cleared in this mutation.
func (m *EmailTemplateMutation) ClearedEdges() []string {
	edges := make([]string, 0, 0)
	return edges
}

// EdgeCleared returns a boolean which indicates if the edge with the given name
// was cleared in this mutation.
func (m *EmailTemplateMutation) EdgeCleared(name string) bool {
	return false
}

// ClearEdge clears the value of the edge with the given name. It returns an error
// if that edge is not defined in the schema.
func (m *EmailTemplateMutation) ClearEdge(name string) error {
	return fmt.Errorf("unknown EmailTemplate unique edge %s", name)
}

// ResetEdge resets all changes to the edge with the given name in this mutation.
// It returns an error if the edge is not defined in the schema.
func (m *EmailTemplateMutation) ResetEdge(name string) error {
	return fmt.Errorf("unknown EmailTemplate edge %s", name)
}

// SharePolicyMutation represents an operation that mutates the SharePolicy nodes in the graph.
type SharePolicyMutation struct {
	config
	op            Op
	typ           string
	id            *string
	create_by     *uint32
	addcreate_by  *int32
	create_time   *time.Time
	update_time   *time.Time
	delete_time   *time.Time
	tenant_id     *uint32
	addtenant_id  *int32
	share_link_id *string
	_type         *sharepolicy.Type
	method        *sharepolicy.Method
	value         *string
	reason        *string
	clearedFields map[string]struct{}
	done          bool
	oldValue      func(context.Context) (*SharePolicy, error)
	predicates    []predicate.SharePolicy
}

var _ ent.Mutation = (*SharePolicyMutation)(nil)

// sharepolicyOption allows management of the mutation configuration using functional options.
type sharepolicyOption func(*SharePolicyMutation)

// newSharePolicyMutation creates new mutation for the SharePolicy entity.
func newSharePolicyMutation(c config, op Op, opts ...sharepolicyOption) *SharePolicyMutation {
	m := &SharePolicyMutation{
		config:        c,
		op:            op,
		typ:           TypeSharePolicy,
		clearedFields: make(map[string]struct{}),
	}
	for _, opt := range opts {
		opt(m)
	}
	return m
}

// withSharePolicyID sets the ID field of the mutation.
func withSharePolicyID(id string) sharepolicyOption {
	return func(m *SharePolicyMutation) {
		var (
			err   error
			once  sync.Once
			value *SharePolicy
		)
		m.oldValue = func(ctx context.Context) (*SharePolicy, error) {
			once.Do(func() {
				if m.done {
					err = errors.New("querying old values post mutation is not allowed")
				} else {
					value, err = m.Client().SharePolicy.Get(ctx, id)
				}
			})
			return value, err
		}
		m.id = &id
	}
}

// withSharePolicy sets the old SharePolicy of the mutation.
func withSharePolicy(node *SharePolicy) sharepolicyOption {
	return func(m *SharePolicyMutation) {
		m.oldValue = func(context.Context) (*SharePolicy, error) {
			return node, nil
		}
		m.id = &node.ID
	}
}

// Client returns a new `ent.Client` from the mutation. If the mutation was
// executed in a transaction (ent.Tx), a transactional client is returned.
func (m SharePolicyMutation) Client() *Client {
	client := &Client{config: m.config}
	client.init()
	return client
}

// Tx returns an `ent.Tx` for mutations that were executed in transactions;
// it returns an error otherwise.
func (m SharePolicyMutation) Tx() (*Tx, error) {
	if _, ok := m.driver.(*txDriver); !ok {
		return nil, errors.New("ent: mutation is not running in a transaction")
	}
	tx := &Tx{config: m.config}
	tx.init()
	return tx, nil
}

// SetID sets the value of the id field. Note that this
// operation is only accepted on creation of SharePolicy entities.
func (m *SharePolicyMutation) SetID(id string) {
	m.id = &id
}

// ID returns the ID value in the mutation. Note that the ID is only available
// if it was provided to the builder or after it was returned from the database.
func (m *SharePolicyMutation) ID() (id string, exists bool) {
	if m.id == nil {
		return
	}
	return *m.id, true
}

// IDs queries the database and returns the entity ids that match the mutation's predicate.
// That means, if the mutation is applied within a transaction with an isolation level such
// as sql.LevelSerializable, the returned ids match the ids of the rows that will be updated
// or updated by the mutation.
func (m *SharePolicyMutation) IDs(ctx context.Context) ([]string, error) {
	switch {
	case m.op.Is(OpUpdateOne | OpDeleteOne):
		id, exists := m.ID()
		if exists {
			return []string{id}, nil
		}
		fallthrough
	case m.op.Is(OpUpdate | OpDelete):
		return m.Client().SharePolicy.Query().Where(m.predicates...).IDs(ctx)
	default:
		return nil, fmt.Errorf("IDs is not allowed on %s operations", m.op)
	}
}

// SetCreateBy sets the "create_by" field.
func (m *SharePolicyMutation) SetCreateBy(u uint32) {
	m.create_by = &u
	m.addcreate_by = nil
}

// CreateBy returns the value of the "create_by" field in the mutation.
func (m *SharePolicyMutation) CreateBy() (r uint32, exists bool) {
	v := m.create_by
	if v == nil {
		return
	}
	return *v, true
}

// OldCreateBy returns the old "create_by" field's value of the SharePolicy entity.
// If the SharePolicy object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharePolicyMutation) OldCreateBy(ctx context.Context) (v *uint32, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldCreateBy is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldCreateBy requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldCreateBy: %w", err)
	}
	return oldValue.CreateBy, nil
}

// AddCreateBy adds u to the "create_by" field.
func (m *SharePolicyMutation) AddCreateBy(u int32) {
	if m.addcreate_by != nil {
		*m.addcreate_by += u
	} else {
		m.addcreate_by = &u
	}
}

// AddedCreateBy returns the value that was added to the "create_by" field in this mutation.
func (m *SharePolicyMutation) AddedCreateBy() (r int32, exists bool) {
	v := m.addcreate_by
	if v == nil {
		return
	}
	return *v, true
}

// ClearCreateBy clears the value of the "create_by" field.
func (m *SharePolicyMutation) ClearCreateBy() {
	m.create_by = nil
	m.addcreate_by = nil
	m.clearedFields[sharepolicy.FieldCreateBy] = struct{}{}
}

// CreateByCleared returns if the "create_by" field was cleared in this mutation.
func (m *SharePolicyMutation) CreateByCleared() bool {
	_, ok := m.clearedFields[sharepolicy.FieldCreateBy]
	return ok
}

// ResetCreateBy resets all changes to the "create_by" field.
func (m *SharePolicyMutation) ResetCreateBy() {
	m.create_by = nil
	m.addcreate_by = nil
	delete(m.clearedFields, sharepolicy.FieldCreateBy)
}

// SetCreateTime sets the "create_time" field.
func (m *SharePolicyMutation) SetCreateTime(t time.Time) {
	m.create_time = &t
}

// CreateTime returns the value of the "create_time" field in the mutation.
func (m *SharePolicyMutation) CreateTime() (r time.Time, exists bool) {
	v := m.create_time
	if v == nil {
		return
	}
	return *v, true
}

// OldCreateTime returns the old "create_time" field's value of the SharePolicy entity.
// If the SharePolicy object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharePolicyMutation) OldCreateTime(ctx context.Context) (v *time.Time, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldCreateTime is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldCreateTime requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldCreateTime: %w", err)
	}
	return oldValue.CreateTime, nil
}

// ClearCreateTime clears the value of the "create_time" field.
func (m *SharePolicyMutation) ClearCreateTime() {
	m.create_time = nil
	m.clearedFields[sharepolicy.FieldCreateTime] = struct{}{}
}

// CreateTimeCleared returns if the "create_time" field was cleared in this mutation.
func (m *SharePolicyMutation) CreateTimeCleared() bool {
	_, ok := m.clearedFields[sharepolicy.FieldCreateTime]
	return ok
}

// ResetCreateTime resets all changes to the "create_time" field.
func (m *SharePolicyMutation) ResetCreateTime() {
	m.create_time = nil
	delete(m.clearedFields, sharepolicy.FieldCreateTime)
}

// SetUpdateTime sets the "update_time" field.
func (m *SharePolicyMutation) SetUpdateTime(t time.Time) {
	m.update_time = &t
}

// UpdateTime returns the value of the "update_time" field in the mutation.
func (m *SharePolicyMutation) UpdateTime() (r time.Time, exists bool) {
	v := m.update_time
	if v == nil {
		return
	}
	return *v, true
}

// OldUpdateTime returns the old "update_time" field's value of the SharePolicy entity.
// If the SharePolicy object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharePolicyMutation) OldUpdateTime(ctx context.Context) (v *time.Time, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldUpdateTime is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldUpdateTime requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldUpdateTime: %w", err)
	}
	return oldValue.UpdateTime, nil
}

// ClearUpdateTime clears the value of the "update_time" field.
func (m *SharePolicyMutation) ClearUpdateTime() {
	m.update_time = nil
	m.clearedFields[sharepolicy.FieldUpdateTime] = struct{}{}
}

// UpdateTimeCleared returns if the "update_time" field was cleared in this mutation.
func (m *SharePolicyMutation) UpdateTimeCleared() bool {
	_, ok := m.clearedFields[sharepolicy.FieldUpdateTime]
	return ok
}

// ResetUpdateTime resets all changes to the "update_time" field.
func (m *SharePolicyMutation) ResetUpdateTime() {
	m.update_time = nil
	delete(m.clearedFields, sharepolicy.FieldUpdateTime)
}

// SetDeleteTime sets the "delete_time" field.
func (m *SharePolicyMutation) SetDeleteTime(t time.Time) {
	m.delete_time = &t
}

// DeleteTime returns the value of the "delete_time" field in the mutation.
func (m *SharePolicyMutation) DeleteTime() (r time.Time, exists bool) {
	v := m.delete_time
	if v == nil {
		return
	}
	return *v, true
}

// OldDeleteTime returns the old "delete_time" field's value of the SharePolicy entity.
// If the SharePolicy object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharePolicyMutation) OldDeleteTime(ctx context.Context) (v *time.Time, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldDeleteTime is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldDeleteTime requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldDeleteTime: %w", err)
	}
	return oldValue.DeleteTime, nil
}

// ClearDeleteTime clears the value of the "delete_time" field.
func (m *SharePolicyMutation) ClearDeleteTime() {
	m.delete_time = nil
	m.clearedFields[sharepolicy.FieldDeleteTime] = struct{}{}
}

// DeleteTimeCleared returns if the "delete_time" field was cleared in this mutation.
func (m *SharePolicyMutation) DeleteTimeCleared() bool {
	_, ok := m.clearedFields[sharepolicy.FieldDeleteTime]
	return ok
}

// ResetDeleteTime resets all changes to the "delete_time" field.
func (m *SharePolicyMutation) ResetDeleteTime() {
	m.delete_time = nil
	delete(m.clearedFields, sharepolicy.FieldDeleteTime)
}

// SetTenantID sets the "tenant_id" field.
func (m *SharePolicyMutation) SetTenantID(u uint32) {
	m.tenant_id = &u
	m.addtenant_id = nil
}

// TenantID returns the value of the "tenant_id" field in the mutation.
func (m *SharePolicyMutation) TenantID() (r uint32, exists bool) {
	v := m.tenant_id
	if v == nil {
		return
	}
	return *v, true
}

// OldTenantID returns the old "tenant_id" field's value of the SharePolicy entity.
// If the SharePolicy object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharePolicyMutation) OldTenantID(ctx context.Context) (v *uint32, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldTenantID is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldTenantID requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldTenantID: %w", err)
	}
	return oldValue.TenantID, nil
}

// AddTenantID adds u to the "tenant_id" field.
func (m *SharePolicyMutation) AddTenantID(u int32) {
	if m.addtenant_id != nil {
		*m.addtenant_id += u
	} else {
		m.addtenant_id = &u
	}
}

// AddedTenantID returns the value that was added to the "tenant_id" field in this mutation.
func (m *SharePolicyMutation) AddedTenantID() (r int32, exists bool) {
	v := m.addtenant_id
	if v == nil {
		return
	}
	return *v, true
}

// ClearTenantID clears the value of the "tenant_id" field.
func (m *SharePolicyMutation) ClearTenantID() {
	m.tenant_id = nil
	m.addtenant_id = nil
	m.clearedFields[sharepolicy.FieldTenantID] = struct{}{}
}

// TenantIDCleared returns if the "tenant_id" field was cleared in this mutation.
func (m *SharePolicyMutation) TenantIDCleared() bool {
	_, ok := m.clearedFields[sharepolicy.FieldTenantID]
	return ok
}

// ResetTenantID resets all changes to the "tenant_id" field.
func (m *SharePolicyMutation) ResetTenantID() {
	m.tenant_id = nil
	m.addtenant_id = nil
	delete(m.clearedFields, sharepolicy.FieldTenantID)
}

// SetShareLinkID sets the "share_link_id" field.
func (m *SharePolicyMutation) SetShareLinkID(s string) {
	m.share_link_id = &s
}

// ShareLinkID returns the value of the "share_link_id" field in the mutation.
func (m *SharePolicyMutation) ShareLinkID() (r string, exists bool) {
	v := m.share_link_id
	if v == nil {
		return
	}
	return *v, true
}

// OldShareLinkID returns the old "share_link_id" field's value of the SharePolicy entity.
// If the SharePolicy object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharePolicyMutation) OldShareLinkID(ctx context.Context) (v string, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldShareLinkID is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldShareLinkID requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldShareLinkID: %w", err)
	}
	return oldValue.ShareLinkID, nil
}

// ResetShareLinkID resets all changes to the "share_link_id" field.
func (m *SharePolicyMutation) ResetShareLinkID() {
	m.share_link_id = nil
}

// SetType sets the "type" field.
func (m *SharePolicyMutation) SetType(s sharepolicy.Type) {
	m._type = &s
}

// GetType returns the value of the "type" field in the mutation.
func (m *SharePolicyMutation) GetType() (r sharepolicy.Type, exists bool) {
	v := m._type
	if v == nil {
		return
	}
	return *v, true
}

// OldType returns the old "type" field's value of the SharePolicy entity.
// If the SharePolicy object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharePolicyMutation) OldType(ctx context.Context) (v sharepolicy.Type, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldType is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldType requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldType: %w", err)
	}
	return oldValue.Type, nil
}

// ResetType resets all changes to the "type" field.
func (m *SharePolicyMutation) ResetType() {
	m._type = nil
}

// SetMethod sets the "method" field.
func (m *SharePolicyMutation) SetMethod(s sharepolicy.Method) {
	m.method = &s
}

// Method returns the value of the "method" field in the mutation.
func (m *SharePolicyMutation) Method() (r sharepolicy.Method, exists bool) {
	v := m.method
	if v == nil {
		return
	}
	return *v, true
}

// OldMethod returns the old "method" field's value of the SharePolicy entity.
// If the SharePolicy object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharePolicyMutation) OldMethod(ctx context.Context) (v sharepolicy.Method, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldMethod is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldMethod requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldMethod: %w", err)
	}
	return oldValue.Method, nil
}

// ResetMethod resets all changes to the "method" field.
func (m *SharePolicyMutation) ResetMethod() {
	m.method = nil
}

// SetValue sets the "value" field.
func (m *SharePolicyMutation) SetValue(s string) {
	m.value = &s
}

// Value returns the value of the "value" field in the mutation.
func (m *SharePolicyMutation) Value() (r string, exists bool) {
	v := m.value
	if v == nil {
		return
	}
	return *v, true
}

// OldValue returns the old "value" field's value of the SharePolicy entity.
// If the SharePolicy object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharePolicyMutation) OldValue(ctx context.Context) (v string, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldValue is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldValue requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldValue: %w", err)
	}
	return oldValue.Value, nil
}

// ResetValue resets all changes to the "value" field.
func (m *SharePolicyMutation) ResetValue() {
	m.value = nil
}

// SetReason sets the "reason" field.
func (m *SharePolicyMutation) SetReason(s string) {
	m.reason = &s
}

// Reason returns the value of the "reason" field in the mutation.
func (m *SharePolicyMutation) Reason() (r string, exists bool) {
	v := m.reason
	if v == nil {
		return
	}
	return *v, true
}

// OldReason returns the old "reason" field's value of the SharePolicy entity.
// If the SharePolicy object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharePolicyMutation) OldReason(ctx context.Context) (v string, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldReason is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldReason requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldReason: %w", err)
	}
	return oldValue.Reason, nil
}

// ClearReason clears the value of the "reason" field.
func (m *SharePolicyMutation) ClearReason() {
	m.reason = nil
	m.clearedFields[sharepolicy.FieldReason] = struct{}{}
}

// ReasonCleared returns if the "reason" field was cleared in this mutation.
func (m *SharePolicyMutation) ReasonCleared() bool {
	_, ok := m.clearedFields[sharepolicy.FieldReason]
	return ok
}

// ResetReason resets all changes to the "reason" field.
func (m *SharePolicyMutation) ResetReason() {
	m.reason = nil
	delete(m.clearedFields, sharepolicy.FieldReason)
}

// Where appends a list predicates to the SharePolicyMutation builder.
func (m *SharePolicyMutation) Where(ps ...predicate.SharePolicy) {
	m.predicates = append(m.predicates, ps...)
}

// WhereP appends storage-level predicates to the SharePolicyMutation builder. Using this method,
// users can use type-assertion to append predicates that do not depend on any generated package.
func (m *SharePolicyMutation) WhereP(ps ...func(*sql.Selector)) {
	p := make([]predicate.SharePolicy, len(ps))
	for i := range ps {
		p[i] = ps[i]
	}
	m.Where(p...)
}

// Op returns the operation name.
func (m *SharePolicyMutation) Op() Op {
	return m.op
}

// SetOp allows setting the mutation operation.
func (m *SharePolicyMutation) SetOp(op Op) {
	m.op = op
}

// Type returns the node type of this mutation (SharePolicy).
func (m *SharePolicyMutation) Type() string {
	return m.typ
}

// Fields returns all fields that were changed during this mutation. Note that in
// order to get all numeric fields that were incremented/decremented, call
// AddedFields().
func (m *SharePolicyMutation) Fields() []string {
	fields := make([]string, 0, 10)
	if m.create_by != nil {
		fields = append(fields, sharepolicy.FieldCreateBy)
	}
	if m.create_time != nil {
		fields = append(fields, sharepolicy.FieldCreateTime)
	}
	if m.update_time != nil {
		fields = append(fields, sharepolicy.FieldUpdateTime)
	}
	if m.delete_time != nil {
		fields = append(fields, sharepolicy.FieldDeleteTime)
	}
	if m.tenant_id != nil {
		fields = append(fields, sharepolicy.FieldTenantID)
	}
	if m.share_link_id != nil {
		fields = append(fields, sharepolicy.FieldShareLinkID)
	}
	if m._type != nil {
		fields = append(fields, sharepolicy.FieldType)
	}
	if m.method != nil {
		fields = append(fields, sharepolicy.FieldMethod)
	}
	if m.value != nil {
		fields = append(fields, sharepolicy.FieldValue)
	}
	if m.reason != nil {
		fields = append(fields, sharepolicy.FieldReason)
	}
	return fields
}

// Field returns the value of a field with the given name. The second boolean
// return value indicates that this field was not set, or was not defined in the
// schema.
func (m *SharePolicyMutation) Field(name string) (ent.Value, bool) {
	switch name {
	case sharepolicy.FieldCreateBy:
		return m.CreateBy()
	case sharepolicy.FieldCreateTime:
		return m.CreateTime()
	case sharepolicy.FieldUpdateTime:
		return m.UpdateTime()
	case sharepolicy.FieldDeleteTime:
		return m.DeleteTime()
	case sharepolicy.FieldTenantID:
		return m.TenantID()
	case sharepolicy.FieldShareLinkID:
		return m.ShareLinkID()
	case sharepolicy.FieldType:
		return m.GetType()
	case sharepolicy.FieldMethod:
		return m.Method()
	case sharepolicy.FieldValue:
		return m.Value()
	case sharepolicy.FieldReason:
		return m.Reason()
	}
	return nil, false
}

// OldField returns the old value of the field from the database. An error is
// returned if the mutation operation is not UpdateOne, or the query to the
// database failed.
func (m *SharePolicyMutation) OldField(ctx context.Context, name string) (ent.Value, error) {
	switch name {
	case sharepolicy.FieldCreateBy:
		return m.OldCreateBy(ctx)
	case sharepolicy.FieldCreateTime:
		return m.OldCreateTime(ctx)
	case sharepolicy.FieldUpdateTime:
		return m.OldUpdateTime(ctx)
	case sharepolicy.FieldDeleteTime:
		return m.OldDeleteTime(ctx)
	case sharepolicy.FieldTenantID:
		return m.OldTenantID(ctx)
	case sharepolicy.FieldShareLinkID:
		return m.OldShareLinkID(ctx)
	case sharepolicy.FieldType:
		return m.OldType(ctx)
	case sharepolicy.FieldMethod:
		return m.OldMethod(ctx)
	case sharepolicy.FieldValue:
		return m.OldValue(ctx)
	case sharepolicy.FieldReason:
		return m.OldReason(ctx)
	}
	return nil, fmt.Errorf("unknown SharePolicy field %s", name)
}

// SetField sets the value of a field with the given name. It returns an error if
// the field is not defined in the schema, or if the type mismatched the field
// type.
func (m *SharePolicyMutation) SetField(name string, value ent.Value) error {
	switch name {
	case sharepolicy.FieldCreateBy:
		v, ok := value.(uint32)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetCreateBy(v)
		return nil
	case sharepolicy.FieldCreateTime:
		v, ok := value.(time.Time)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetCreateTime(v)
		return nil
	case sharepolicy.FieldUpdateTime:
		v, ok := value.(time.Time)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetUpdateTime(v)
		return nil
	case sharepolicy.FieldDeleteTime:
		v, ok := value.(time.Time)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetDeleteTime(v)
		return nil
	case sharepolicy.FieldTenantID:
		v, ok := value.(uint32)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetTenantID(v)
		return nil
	case sharepolicy.FieldShareLinkID:
		v, ok := value.(string)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetShareLinkID(v)
		return nil
	case sharepolicy.FieldType:
		v, ok := value.(sharepolicy.Type)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetType(v)
		return nil
	case sharepolicy.FieldMethod:
		v, ok := value.(sharepolicy.Method)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetMethod(v)
		return nil
	case sharepolicy.FieldValue:
		v, ok := value.(string)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetValue(v)
		return nil
	case sharepolicy.FieldReason:
		v, ok := value.(string)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetReason(v)
		return nil
	}
	return fmt.Errorf("unknown SharePolicy field %s", name)
}

// AddedFields returns all numeric fields that were incremented/decremented during
// this mutation.
func (m *SharePolicyMutation) AddedFields() []string {
	var fields []string
	if m.addcreate_by != nil {
		fields = append(fields, sharepolicy.FieldCreateBy)
	}
	if m.addtenant_id != nil {
		fields = append(fields, sharepolicy.FieldTenantID)
	}
	return fields
}

// AddedField returns the numeric value that was incremented/decremented on a field
// with the given name. The second boolean return value indicates that this field
// was not set, or was not defined in the schema.
func (m *SharePolicyMutation) AddedField(name string) (ent.Value, bool) {
	switch name {
	case sharepolicy.FieldCreateBy:
		return m.AddedCreateBy()
	case sharepolicy.FieldTenantID:
		return m.AddedTenantID()
	}
	return nil, false
}

// AddField adds the value to the field with the given name. It returns an error if
// the field is not defined in the schema, or if the type mismatched the field
// type.
func (m *SharePolicyMutation) AddField(name string, value ent.Value) error {
	switch name {
	case sharepolicy.FieldCreateBy:
		v, ok := value.(int32)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.AddCreateBy(v)
		return nil
	case sharepolicy.FieldTenantID:
		v, ok := value.(int32)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.AddTenantID(v)
		return nil
	}
	return fmt.Errorf("unknown SharePolicy numeric field %s", name)
}

// ClearedFields returns all nullable fields that were cleared during this
// mutation.
func (m *SharePolicyMutation) ClearedFields() []string {
	var fields []string
	if m.FieldCleared(sharepolicy.FieldCreateBy) {
		fields = append(fields, sharepolicy.FieldCreateBy)
	}
	if m.FieldCleared(sharepolicy.FieldCreateTime) {
		fields = append(fields, sharepolicy.FieldCreateTime)
	}
	if m.FieldCleared(sharepolicy.FieldUpdateTime) {
		fields = append(fields, sharepolicy.FieldUpdateTime)
	}
	if m.FieldCleared(sharepolicy.FieldDeleteTime) {
		fields = append(fields, sharepolicy.FieldDeleteTime)
	}
	if m.FieldCleared(sharepolicy.FieldTenantID) {
		fields = append(fields, sharepolicy.FieldTenantID)
	}
	if m.FieldCleared(sharepolicy.FieldReason) {
		fields = append(fields, sharepolicy.FieldReason)
	}
	return fields
}

// FieldCleared returns a boolean indicating if a field with the given name was
// cleared in this mutation.
func (m *SharePolicyMutation) FieldCleared(name string) bool {
	_, ok := m.clearedFields[name]
	return ok
}

// ClearField clears the value of the field with the given name. It returns an
// error if the field is not defined in the schema.
func (m *SharePolicyMutation) ClearField(name string) error {
	switch name {
	case sharepolicy.FieldCreateBy:
		m.ClearCreateBy()
		return nil
	case sharepolicy.FieldCreateTime:
		m.ClearCreateTime()
		return nil
	case sharepolicy.FieldUpdateTime:
		m.ClearUpdateTime()
		return nil
	case sharepolicy.FieldDeleteTime:
		m.ClearDeleteTime()
		return nil
	case sharepolicy.FieldTenantID:
		m.ClearTenantID()
		return nil
	case sharepolicy.FieldReason:
		m.ClearReason()
		return nil
	}
	return fmt.Errorf("unknown SharePolicy nullable field %s", name)
}

// ResetField resets all changes in the mutation for the field with the given name.
// It returns an error if the field is not defined in the schema.
func (m *SharePolicyMutation) ResetField(name string) error {
	switch name {
	case sharepolicy.FieldCreateBy:
		m.ResetCreateBy()
		return nil
	case sharepolicy.FieldCreateTime:
		m.ResetCreateTime()
		return nil
	case sharepolicy.FieldUpdateTime:
		m.ResetUpdateTime()
		return nil
	case sharepolicy.FieldDeleteTime:
		m.ResetDeleteTime()
		return nil
	case sharepolicy.FieldTenantID:
		m.ResetTenantID()
		return nil
	case sharepolicy.FieldShareLinkID:
		m.ResetShareLinkID()
		return nil
	case sharepolicy.FieldType:
		m.ResetType()
		return nil
	case sharepolicy.FieldMethod:
		m.ResetMethod()
		return nil
	case sharepolicy.FieldValue:
		m.ResetValue()
		return nil
	case sharepolicy.FieldReason:
		m.ResetReason()
		return nil
	}
	return fmt.Errorf("unknown SharePolicy field %s", name)
}

// AddedEdges returns all edge names that were set/added in this mutation.
func (m *SharePolicyMutation) AddedEdges() []string {
	edges := make([]string, 0, 0)
	return edges
}

// AddedIDs returns all IDs (to other nodes) that were added for the given edge
// name in this mutation.
func (m *SharePolicyMutation) AddedIDs(name string) []ent.Value {
	return nil
}

// RemovedEdges returns all edge names that were removed in this mutation.
func (m *SharePolicyMutation) RemovedEdges() []string {
	edges := make([]string, 0, 0)
	return edges
}

// RemovedIDs returns all IDs (to other nodes) that were removed for the edge with
// the given name in this mutation.
func (m *SharePolicyMutation) RemovedIDs(name string) []ent.Value {
	return nil
}

// ClearedEdges returns all edge names that were cleared in this mutation.
func (m *SharePolicyMutation) ClearedEdges() []string {
	edges := make([]string, 0, 0)
	return edges
}

// EdgeCleared returns a boolean which indicates if the edge with the given name
// was cleared in this mutation.
func (m *SharePolicyMutation) EdgeCleared(name string) bool {
	return false
}

// ClearEdge clears the value of the edge with the given name. It returns an error
// if that edge is not defined in the schema.
func (m *SharePolicyMutation) ClearEdge(name string) error {
	return fmt.Errorf("unknown SharePolicy unique edge %s", name)
}

// ResetEdge resets all changes to the edge with the given name in this mutation.
// It returns an error if the edge is not defined in the schema.
func (m *SharePolicyMutation) ResetEdge(name string) error {
	return fmt.Errorf("unknown SharePolicy edge %s", name)
}

// SharedLinkMutation represents an operation that mutates the SharedLink nodes in the graph.
type SharedLinkMutation struct {
	config
	op                Op
	typ               string
	id                *string
	create_by         *uint32
	addcreate_by      *int32
	create_time       *time.Time
	update_time       *time.Time
	delete_time       *time.Time
	tenant_id         *uint32
	addtenant_id      *int32
	resource_type     *sharedlink.ResourceType
	resource_id       *string
	resource_name     *string
	token             *string
	encrypted_content *[]byte
	encryption_nonce  *[]byte
	recipient_email   *string
	message           *string
	template_id       *string
	viewed            *bool
	viewed_at         *time.Time
	viewed_ip         *string
	revoked           *bool
	clearedFields     map[string]struct{}
	done              bool
	oldValue          func(context.Context) (*SharedLink, error)
	predicates        []predicate.SharedLink
}

var _ ent.Mutation = (*SharedLinkMutation)(nil)

// sharedlinkOption allows management of the mutation configuration using functional options.
type sharedlinkOption func(*SharedLinkMutation)

// newSharedLinkMutation creates new mutation for the SharedLink entity.
func newSharedLinkMutation(c config, op Op, opts ...sharedlinkOption) *SharedLinkMutation {
	m := &SharedLinkMutation{
		config:        c,
		op:            op,
		typ:           TypeSharedLink,
		clearedFields: make(map[string]struct{}),
	}
	for _, opt := range opts {
		opt(m)
	}
	return m
}

// withSharedLinkID sets the ID field of the mutation.
func withSharedLinkID(id string) sharedlinkOption {
	return func(m *SharedLinkMutation) {
		var (
			err   error
			once  sync.Once
			value *SharedLink
		)
		m.oldValue = func(ctx context.Context) (*SharedLink, error) {
			once.Do(func() {
				if m.done {
					err = errors.New("querying old values post mutation is not allowed")
				} else {
					value, err = m.Client().SharedLink.Get(ctx, id)
				}
			})
			return value, err
		}
		m.id = &id
	}
}

// withSharedLink sets the old SharedLink of the mutation.
func withSharedLink(node *SharedLink) sharedlinkOption {
	return func(m *SharedLinkMutation) {
		m.oldValue = func(context.Context) (*SharedLink, error) {
			return node, nil
		}
		m.id = &node.ID
	}
}

// Client returns a new `ent.Client` from the mutation. If the mutation was
// executed in a transaction (ent.Tx), a transactional client is returned.
func (m SharedLinkMutation) Client() *Client {
	client := &Client{config: m.config}
	client.init()
	return client
}

// Tx returns an `ent.Tx` for mutations that were executed in transactions;
// it returns an error otherwise.
func (m SharedLinkMutation) Tx() (*Tx, error) {
	if _, ok := m.driver.(*txDriver); !ok {
		return nil, errors.New("ent: mutation is not running in a transaction")
	}
	tx := &Tx{config: m.config}
	tx.init()
	return tx, nil
}

// SetID sets the value of the id field. Note that this
// operation is only accepted on creation of SharedLink entities.
func (m *SharedLinkMutation) SetID(id string) {
	m.id = &id
}

// ID returns the ID value in the mutation. Note that the ID is only available
// if it was provided to the builder or after it was returned from the database.
func (m *SharedLinkMutation) ID() (id string, exists bool) {
	if m.id == nil {
		return
	}
	return *m.id, true
}

// IDs queries the database and returns the entity ids that match the mutation's predicate.
// That means, if the mutation is applied within a transaction with an isolation level such
// as sql.LevelSerializable, the returned ids match the ids of the rows that will be updated
// or updated by the mutation.
func (m *SharedLinkMutation) IDs(ctx context.Context) ([]string, error) {
	switch {
	case m.op.Is(OpUpdateOne | OpDeleteOne):
		id, exists := m.ID()
		if exists {
			return []string{id}, nil
		}
		fallthrough
	case m.op.Is(OpUpdate | OpDelete):
		return m.Client().SharedLink.Query().Where(m.predicates...).IDs(ctx)
	default:
		return nil, fmt.Errorf("IDs is not allowed on %s operations", m.op)
	}
}

// SetCreateBy sets the "create_by" field.
func (m *SharedLinkMutation) SetCreateBy(u uint32) {
	m.create_by = &u
	m.addcreate_by = nil
}

// CreateBy returns the value of the "create_by" field in the mutation.
func (m *SharedLinkMutation) CreateBy() (r uint32, exists bool) {
	v := m.create_by
	if v == nil {
		return
	}
	return *v, true
}

// OldCreateBy returns the old "create_by" field's value of the SharedLink entity.
// If the SharedLink object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharedLinkMutation) OldCreateBy(ctx context.Context) (v *uint32, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldCreateBy is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldCreateBy requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldCreateBy: %w", err)
	}
	return oldValue.CreateBy, nil
}

// AddCreateBy adds u to the "create_by" field.
func (m *SharedLinkMutation) AddCreateBy(u int32) {
	if m.addcreate_by != nil {
		*m.addcreate_by += u
	} else {
		m.addcreate_by = &u
	}
}

// AddedCreateBy returns the value that was added to the "create_by" field in this mutation.
func (m *SharedLinkMutation) AddedCreateBy() (r int32, exists bool) {
	v := m.addcreate_by
	if v == nil {
		return
	}
	return *v, true
}

// ClearCreateBy clears the value of the "create_by" field.
func (m *SharedLinkMutation) ClearCreateBy() {
	m.create_by = nil
	m.addcreate_by = nil
	m.clearedFields[sharedlink.FieldCreateBy] = struct{}{}
}

// CreateByCleared returns if the "create_by" field was cleared in this mutation.
func (m *SharedLinkMutation) CreateByCleared() bool {
	_, ok := m.clearedFields[sharedlink.FieldCreateBy]
	return ok
}

// ResetCreateBy resets all changes to the "create_by" field.
func (m *SharedLinkMutation) ResetCreateBy() {
	m.create_by = nil
	m.addcreate_by = nil
	delete(m.clearedFields, sharedlink.FieldCreateBy)
}

// SetCreateTime sets the "create_time" field.
func (m *SharedLinkMutation) SetCreateTime(t time.Time) {
	m.create_time = &t
}

// CreateTime returns the value of the "create_time" field in the mutation.
func (m *SharedLinkMutation) CreateTime() (r time.Time, exists bool) {
	v := m.create_time
	if v == nil {
		return
	}
	return *v, true
}

// OldCreateTime returns the old "create_time" field's value of the SharedLink entity.
// If the SharedLink object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharedLinkMutation) OldCreateTime(ctx context.Context) (v *time.Time, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldCreateTime is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldCreateTime requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldCreateTime: %w", err)
	}
	return oldValue.CreateTime, nil
}

// ClearCreateTime clears the value of the "create_time" field.
func (m *SharedLinkMutation) ClearCreateTime() {
	m.create_time = nil
	m.clearedFields[sharedlink.FieldCreateTime] = struct{}{}
}

// CreateTimeCleared returns if the "create_time" field was cleared in this mutation.
func (m *SharedLinkMutation) CreateTimeCleared() bool {
	_, ok := m.clearedFields[sharedlink.FieldCreateTime]
	return ok
}

// ResetCreateTime resets all changes to the "create_time" field.
func (m *SharedLinkMutation) ResetCreateTime() {
	m.create_time = nil
	delete(m.clearedFields, sharedlink.FieldCreateTime)
}

// SetUpdateTime sets the "update_time" field.
func (m *SharedLinkMutation) SetUpdateTime(t time.Time) {
	m.update_time = &t
}

// UpdateTime returns the value of the "update_time" field in the mutation.
func (m *SharedLinkMutation) UpdateTime() (r time.Time, exists bool) {
	v := m.update_time
	if v == nil {
		return
	}
	return *v, true
}

// OldUpdateTime returns the old "update_time" field's value of the SharedLink entity.
// If the SharedLink object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharedLinkMutation) OldUpdateTime(ctx context.Context) (v *time.Time, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldUpdateTime is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldUpdateTime requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldUpdateTime: %w", err)
	}
	return oldValue.UpdateTime, nil
}

// ClearUpdateTime clears the value of the "update_time" field.
func (m *SharedLinkMutation) ClearUpdateTime() {
	m.update_time = nil
	m.clearedFields[sharedlink.FieldUpdateTime] = struct{}{}
}

// UpdateTimeCleared returns if the "update_time" field was cleared in this mutation.
func (m *SharedLinkMutation) UpdateTimeCleared() bool {
	_, ok := m.clearedFields[sharedlink.FieldUpdateTime]
	return ok
}

// ResetUpdateTime resets all changes to the "update_time" field.
func (m *SharedLinkMutation) ResetUpdateTime() {
	m.update_time = nil
	delete(m.clearedFields, sharedlink.FieldUpdateTime)
}

// SetDeleteTime sets the "delete_time" field.
func (m *SharedLinkMutation) SetDeleteTime(t time.Time) {
	m.delete_time = &t
}

// DeleteTime returns the value of the "delete_time" field in the mutation.
func (m *SharedLinkMutation) DeleteTime() (r time.Time, exists bool) {
	v := m.delete_time
	if v == nil {
		return
	}
	return *v, true
}

// OldDeleteTime returns the old "delete_time" field's value of the SharedLink entity.
// If the SharedLink object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharedLinkMutation) OldDeleteTime(ctx context.Context) (v *time.Time, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldDeleteTime is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldDeleteTime requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldDeleteTime: %w", err)
	}
	return oldValue.DeleteTime, nil
}

// ClearDeleteTime clears the value of the "delete_time" field.
func (m *SharedLinkMutation) ClearDeleteTime() {
	m.delete_time = nil
	m.clearedFields[sharedlink.FieldDeleteTime] = struct{}{}
}

// DeleteTimeCleared returns if the "delete_time" field was cleared in this mutation.
func (m *SharedLinkMutation) DeleteTimeCleared() bool {
	_, ok := m.clearedFields[sharedlink.FieldDeleteTime]
	return ok
}

// ResetDeleteTime resets all changes to the "delete_time" field.
func (m *SharedLinkMutation) ResetDeleteTime() {
	m.delete_time = nil
	delete(m.clearedFields, sharedlink.FieldDeleteTime)
}

// SetTenantID sets the "tenant_id" field.
func (m *SharedLinkMutation) SetTenantID(u uint32) {
	m.tenant_id = &u
	m.addtenant_id = nil
}

// TenantID returns the value of the "tenant_id" field in the mutation.
func (m *SharedLinkMutation) TenantID() (r uint32, exists bool) {
	v := m.tenant_id
	if v == nil {
		return
	}
	return *v, true
}

// OldTenantID returns the old "tenant_id" field's value of the SharedLink entity.
// If the SharedLink object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharedLinkMutation) OldTenantID(ctx context.Context) (v *uint32, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldTenantID is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldTenantID requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldTenantID: %w", err)
	}
	return oldValue.TenantID, nil
}

// AddTenantID adds u to the "tenant_id" field.
func (m *SharedLinkMutation) AddTenantID(u int32) {
	if m.addtenant_id != nil {
		*m.addtenant_id += u
	} else {
		m.addtenant_id = &u
	}
}

// AddedTenantID returns the value that was added to the "tenant_id" field in this mutation.
func (m *SharedLinkMutation) AddedTenantID() (r int32, exists bool) {
	v := m.addtenant_id
	if v == nil {
		return
	}
	return *v, true
}

// ClearTenantID clears the value of the "tenant_id" field.
func (m *SharedLinkMutation) ClearTenantID() {
	m.tenant_id = nil
	m.addtenant_id = nil
	m.clearedFields[sharedlink.FieldTenantID] = struct{}{}
}

// TenantIDCleared returns if the "tenant_id" field was cleared in this mutation.
func (m *SharedLinkMutation) TenantIDCleared() bool {
	_, ok := m.clearedFields[sharedlink.FieldTenantID]
	return ok
}

// ResetTenantID resets all changes to the "tenant_id" field.
func (m *SharedLinkMutation) ResetTenantID() {
	m.tenant_id = nil
	m.addtenant_id = nil
	delete(m.clearedFields, sharedlink.FieldTenantID)
}

// SetResourceType sets the "resource_type" field.
func (m *SharedLinkMutation) SetResourceType(st sharedlink.ResourceType) {
	m.resource_type = &st
}

// ResourceType returns the value of the "resource_type" field in the mutation.
func (m *SharedLinkMutation) ResourceType() (r sharedlink.ResourceType, exists bool) {
	v := m.resource_type
	if v == nil {
		return
	}
	return *v, true
}

// OldResourceType returns the old "resource_type" field's value of the SharedLink entity.
// If the SharedLink object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharedLinkMutation) OldResourceType(ctx context.Context) (v sharedlink.ResourceType, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldResourceType is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldResourceType requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldResourceType: %w", err)
	}
	return oldValue.ResourceType, nil
}

// ResetResourceType resets all changes to the "resource_type" field.
func (m *SharedLinkMutation) ResetResourceType() {
	m.resource_type = nil
}

// SetResourceID sets the "resource_id" field.
func (m *SharedLinkMutation) SetResourceID(s string) {
	m.resource_id = &s
}

// ResourceID returns the value of the "resource_id" field in the mutation.
func (m *SharedLinkMutation) ResourceID() (r string, exists bool) {
	v := m.resource_id
	if v == nil {
		return
	}
	return *v, true
}

// OldResourceID returns the old "resource_id" field's value of the SharedLink entity.
// If the SharedLink object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharedLinkMutation) OldResourceID(ctx context.Context) (v string, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldResourceID is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldResourceID requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldResourceID: %w", err)
	}
	return oldValue.ResourceID, nil
}

// ResetResourceID resets all changes to the "resource_id" field.
func (m *SharedLinkMutation) ResetResourceID() {
	m.resource_id = nil
}

// SetResourceName sets the "resource_name" field.
func (m *SharedLinkMutation) SetResourceName(s string) {
	m.resource_name = &s
}

// ResourceName returns the value of the "resource_name" field in the mutation.
func (m *SharedLinkMutation) ResourceName() (r string, exists bool) {
	v := m.resource_name
	if v == nil {
		return
	}
	return *v, true
}

// OldResourceName returns the old "resource_name" field's value of the SharedLink entity.
// If the SharedLink object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharedLinkMutation) OldResourceName(ctx context.Context) (v string, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldResourceName is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldResourceName requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldResourceName: %w", err)
	}
	return oldValue.ResourceName, nil
}

// ResetResourceName resets all changes to the "resource_name" field.
func (m *SharedLinkMutation) ResetResourceName() {
	m.resource_name = nil
}

// SetToken sets the "token" field.
func (m *SharedLinkMutation) SetToken(s string) {
	m.token = &s
}

// Token returns the value of the "token" field in the mutation.
func (m *SharedLinkMutation) Token() (r string, exists bool) {
	v := m.token
	if v == nil {
		return
	}
	return *v, true
}

// OldToken returns the old "token" field's value of the SharedLink entity.
// If the SharedLink object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharedLinkMutation) OldToken(ctx context.Context) (v string, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldToken is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldToken requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldToken: %w", err)
	}
	return oldValue.Token, nil
}

// ResetToken resets all changes to the "token" field.
func (m *SharedLinkMutation) ResetToken() {
	m.token = nil
}

// SetEncryptedContent sets the "encrypted_content" field.
func (m *SharedLinkMutation) SetEncryptedContent(b []byte) {
	m.encrypted_content = &b
}

// EncryptedContent returns the value of the "encrypted_content" field in the mutation.
func (m *SharedLinkMutation) EncryptedContent() (r []byte, exists bool) {
	v := m.encrypted_content
	if v == nil {
		return
	}
	return *v, true
}

// OldEncryptedContent returns the old "encrypted_content" field's value of the SharedLink entity.
// If the SharedLink object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharedLinkMutation) OldEncryptedContent(ctx context.Context) (v *[]byte, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldEncryptedContent is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldEncryptedContent requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldEncryptedContent: %w", err)
	}
	return oldValue.EncryptedContent, nil
}

// ClearEncryptedContent clears the value of the "encrypted_content" field.
func (m *SharedLinkMutation) ClearEncryptedContent() {
	m.encrypted_content = nil
	m.clearedFields[sharedlink.FieldEncryptedContent] = struct{}{}
}

// EncryptedContentCleared returns if the "encrypted_content" field was cleared in this mutation.
func (m *SharedLinkMutation) EncryptedContentCleared() bool {
	_, ok := m.clearedFields[sharedlink.FieldEncryptedContent]
	return ok
}

// ResetEncryptedContent resets all changes to the "encrypted_content" field.
func (m *SharedLinkMutation) ResetEncryptedContent() {
	m.encrypted_content = nil
	delete(m.clearedFields, sharedlink.FieldEncryptedContent)
}

// SetEncryptionNonce sets the "encryption_nonce" field.
func (m *SharedLinkMutation) SetEncryptionNonce(b []byte) {
	m.encryption_nonce = &b
}

// EncryptionNonce returns the value of the "encryption_nonce" field in the mutation.
func (m *SharedLinkMutation) EncryptionNonce() (r []byte, exists bool) {
	v := m.encryption_nonce
	if v == nil {
		return
	}
	return *v, true
}

// OldEncryptionNonce returns the old "encryption_nonce" field's value of the SharedLink entity.
// If the SharedLink object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharedLinkMutation) OldEncryptionNonce(ctx context.Context) (v *[]byte, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldEncryptionNonce is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldEncryptionNonce requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldEncryptionNonce: %w", err)
	}
	return oldValue.EncryptionNonce, nil
}

// ClearEncryptionNonce clears the value of the "encryption_nonce" field.
func (m *SharedLinkMutation) ClearEncryptionNonce() {
	m.encryption_nonce = nil
	m.clearedFields[sharedlink.FieldEncryptionNonce] = struct{}{}
}

// EncryptionNonceCleared returns if the "encryption_nonce" field was cleared in this mutation.
func (m *SharedLinkMutation) EncryptionNonceCleared() bool {
	_, ok := m.clearedFields[sharedlink.FieldEncryptionNonce]
	return ok
}

// ResetEncryptionNonce resets all changes to the "encryption_nonce" field.
func (m *SharedLinkMutation) ResetEncryptionNonce() {
	m.encryption_nonce = nil
	delete(m.clearedFields, sharedlink.FieldEncryptionNonce)
}

// SetRecipientEmail sets the "recipient_email" field.
func (m *SharedLinkMutation) SetRecipientEmail(s string) {
	m.recipient_email = &s
}

// RecipientEmail returns the value of the "recipient_email" field in the mutation.
func (m *SharedLinkMutation) RecipientEmail() (r string, exists bool) {
	v := m.recipient_email
	if v == nil {
		return
	}
	return *v, true
}

// OldRecipientEmail returns the old "recipient_email" field's value of the SharedLink entity.
// If the SharedLink object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharedLinkMutation) OldRecipientEmail(ctx context.Context) (v string, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldRecipientEmail is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldRecipientEmail requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldRecipientEmail: %w", err)
	}
	return oldValue.RecipientEmail, nil
}

// ResetRecipientEmail resets all changes to the "recipient_email" field.
func (m *SharedLinkMutation) ResetRecipientEmail() {
	m.recipient_email = nil
}

// SetMessage sets the "message" field.
func (m *SharedLinkMutation) SetMessage(s string) {
	m.message = &s
}

// Message returns the value of the "message" field in the mutation.
func (m *SharedLinkMutation) Message() (r string, exists bool) {
	v := m.message
	if v == nil {
		return
	}
	return *v, true
}

// OldMessage returns the old "message" field's value of the SharedLink entity.
// If the SharedLink object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharedLinkMutation) OldMessage(ctx context.Context) (v string, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldMessage is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldMessage requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldMessage: %w", err)
	}
	return oldValue.Message, nil
}

// ClearMessage clears the value of the "message" field.
func (m *SharedLinkMutation) ClearMessage() {
	m.message = nil
	m.clearedFields[sharedlink.FieldMessage] = struct{}{}
}

// MessageCleared returns if the "message" field was cleared in this mutation.
func (m *SharedLinkMutation) MessageCleared() bool {
	_, ok := m.clearedFields[sharedlink.FieldMessage]
	return ok
}

// ResetMessage resets all changes to the "message" field.
func (m *SharedLinkMutation) ResetMessage() {
	m.message = nil
	delete(m.clearedFields, sharedlink.FieldMessage)
}

// SetTemplateID sets the "template_id" field.
func (m *SharedLinkMutation) SetTemplateID(s string) {
	m.template_id = &s
}

// TemplateID returns the value of the "template_id" field in the mutation.
func (m *SharedLinkMutation) TemplateID() (r string, exists bool) {
	v := m.template_id
	if v == nil {
		return
	}
	return *v, true
}

// OldTemplateID returns the old "template_id" field's value of the SharedLink entity.
// If the SharedLink object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharedLinkMutation) OldTemplateID(ctx context.Context) (v *string, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldTemplateID is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldTemplateID requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldTemplateID: %w", err)
	}
	return oldValue.TemplateID, nil
}

// ClearTemplateID clears the value of the "template_id" field.
func (m *SharedLinkMutation) ClearTemplateID() {
	m.template_id = nil
	m.clearedFields[sharedlink.FieldTemplateID] = struct{}{}
}

// TemplateIDCleared returns if the "template_id" field was cleared in this mutation.
func (m *SharedLinkMutation) TemplateIDCleared() bool {
	_, ok := m.clearedFields[sharedlink.FieldTemplateID]
	return ok
}

// ResetTemplateID resets all changes to the "template_id" field.
func (m *SharedLinkMutation) ResetTemplateID() {
	m.template_id = nil
	delete(m.clearedFields, sharedlink.FieldTemplateID)
}

// SetViewed sets the "viewed" field.
func (m *SharedLinkMutation) SetViewed(b bool) {
	m.viewed = &b
}

// Viewed returns the value of the "viewed" field in the mutation.
func (m *SharedLinkMutation) Viewed() (r bool, exists bool) {
	v := m.viewed
	if v == nil {
		return
	}
	return *v, true
}

// OldViewed returns the old "viewed" field's value of the SharedLink entity.
// If the SharedLink object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharedLinkMutation) OldViewed(ctx context.Context) (v bool, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldViewed is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldViewed requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldViewed: %w", err)
	}
	return oldValue.Viewed, nil
}

// ResetViewed resets all changes to the "viewed" field.
func (m *SharedLinkMutation) ResetViewed() {
	m.viewed = nil
}

// SetViewedAt sets the "viewed_at" field.
func (m *SharedLinkMutation) SetViewedAt(t time.Time) {
	m.viewed_at = &t
}

// ViewedAt returns the value of the "viewed_at" field in the mutation.
func (m *SharedLinkMutation) ViewedAt() (r time.Time, exists bool) {
	v := m.viewed_at
	if v == nil {
		return
	}
	return *v, true
}

// OldViewedAt returns the old "viewed_at" field's value of the SharedLink entity.
// If the SharedLink object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharedLinkMutation) OldViewedAt(ctx context.Context) (v *time.Time, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldViewedAt is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldViewedAt requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldViewedAt: %w", err)
	}
	return oldValue.ViewedAt, nil
}

// ClearViewedAt clears the value of the "viewed_at" field.
func (m *SharedLinkMutation) ClearViewedAt() {
	m.viewed_at = nil
	m.clearedFields[sharedlink.FieldViewedAt] = struct{}{}
}

// ViewedAtCleared returns if the "viewed_at" field was cleared in this mutation.
func (m *SharedLinkMutation) ViewedAtCleared() bool {
	_, ok := m.clearedFields[sharedlink.FieldViewedAt]
	return ok
}

// ResetViewedAt resets all changes to the "viewed_at" field.
func (m *SharedLinkMutation) ResetViewedAt() {
	m.viewed_at = nil
	delete(m.clearedFields, sharedlink.FieldViewedAt)
}

// SetViewedIP sets the "viewed_ip" field.
func (m *SharedLinkMutation) SetViewedIP(s string) {
	m.viewed_ip = &s
}

// ViewedIP returns the value of the "viewed_ip" field in the mutation.
func (m *SharedLinkMutation) ViewedIP() (r string, exists bool) {
	v := m.viewed_ip
	if v == nil {
		return
	}
	return *v, true
}

// OldViewedIP returns the old "viewed_ip" field's value of the SharedLink entity.
// If the SharedLink object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharedLinkMutation) OldViewedIP(ctx context.Context) (v string, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldViewedIP is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldViewedIP requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldViewedIP: %w", err)
	}
	return oldValue.ViewedIP, nil
}

// ClearViewedIP clears the value of the "viewed_ip" field.
func (m *SharedLinkMutation) ClearViewedIP() {
	m.viewed_ip = nil
	m.clearedFields[sharedlink.FieldViewedIP] = struct{}{}
}

// ViewedIPCleared returns if the "viewed_ip" field was cleared in this mutation.
func (m *SharedLinkMutation) ViewedIPCleared() bool {
	_, ok := m.clearedFields[sharedlink.FieldViewedIP]
	return ok
}

// ResetViewedIP resets all changes to the "viewed_ip" field.
func (m *SharedLinkMutation) ResetViewedIP() {
	m.viewed_ip = nil
	delete(m.clearedFields, sharedlink.FieldViewedIP)
}

// SetRevoked sets the "revoked" field.
func (m *SharedLinkMutation) SetRevoked(b bool) {
	m.revoked = &b
}

// Revoked returns the value of the "revoked" field in the mutation.
func (m *SharedLinkMutation) Revoked() (r bool, exists bool) {
	v := m.revoked
	if v == nil {
		return
	}
	return *v, true
}

// OldRevoked returns the old "revoked" field's value of the SharedLink entity.
// If the SharedLink object wasn't provided to the builder, the object is fetched from the database.
// An error is returned if the mutation operation is not UpdateOne, or the database query fails.
func (m *SharedLinkMutation) OldRevoked(ctx context.Context) (v bool, err error) {
	if !m.op.Is(OpUpdateOne) {
		return v, errors.New("OldRevoked is only allowed on UpdateOne operations")
	}
	if m.id == nil || m.oldValue == nil {
		return v, errors.New("OldRevoked requires an ID field in the mutation")
	}
	oldValue, err := m.oldValue(ctx)
	if err != nil {
		return v, fmt.Errorf("querying old value for OldRevoked: %w", err)
	}
	return oldValue.Revoked, nil
}

// ResetRevoked resets all changes to the "revoked" field.
func (m *SharedLinkMutation) ResetRevoked() {
	m.revoked = nil
}

// Where appends a list predicates to the SharedLinkMutation builder.
func (m *SharedLinkMutation) Where(ps ...predicate.SharedLink) {
	m.predicates = append(m.predicates, ps...)
}

// WhereP appends storage-level predicates to the SharedLinkMutation builder. Using this method,
// users can use type-assertion to append predicates that do not depend on any generated package.
func (m *SharedLinkMutation) WhereP(ps ...func(*sql.Selector)) {
	p := make([]predicate.SharedLink, len(ps))
	for i := range ps {
		p[i] = ps[i]
	}
	m.Where(p...)
}

// Op returns the operation name.
func (m *SharedLinkMutation) Op() Op {
	return m.op
}

// SetOp allows setting the mutation operation.
func (m *SharedLinkMutation) SetOp(op Op) {
	m.op = op
}

// Type returns the node type of this mutation (SharedLink).
func (m *SharedLinkMutation) Type() string {
	return m.typ
}

// Fields returns all fields that were changed during this mutation. Note that in
// order to get all numeric fields that were incremented/decremented, call
// AddedFields().
func (m *SharedLinkMutation) Fields() []string {
	fields := make([]string, 0, 18)
	if m.create_by != nil {
		fields = append(fields, sharedlink.FieldCreateBy)
	}
	if m.create_time != nil {
		fields = append(fields, sharedlink.FieldCreateTime)
	}
	if m.update_time != nil {
		fields = append(fields, sharedlink.FieldUpdateTime)
	}
	if m.delete_time != nil {
		fields = append(fields, sharedlink.FieldDeleteTime)
	}
	if m.tenant_id != nil {
		fields = append(fields, sharedlink.FieldTenantID)
	}
	if m.resource_type != nil {
		fields = append(fields, sharedlink.FieldResourceType)
	}
	if m.resource_id != nil {
		fields = append(fields, sharedlink.FieldResourceID)
	}
	if m.resource_name != nil {
		fields = append(fields, sharedlink.FieldResourceName)
	}
	if m.token != nil {
		fields = append(fields, sharedlink.FieldToken)
	}
	if m.encrypted_content != nil {
		fields = append(fields, sharedlink.FieldEncryptedContent)
	}
	if m.encryption_nonce != nil {
		fields = append(fields, sharedlink.FieldEncryptionNonce)
	}
	if m.recipient_email != nil {
		fields = append(fields, sharedlink.FieldRecipientEmail)
	}
	if m.message != nil {
		fields = append(fields, sharedlink.FieldMessage)
	}
	if m.template_id != nil {
		fields = append(fields, sharedlink.FieldTemplateID)
	}
	if m.viewed != nil {
		fields = append(fields, sharedlink.FieldViewed)
	}
	if m.viewed_at != nil {
		fields = append(fields, sharedlink.FieldViewedAt)
	}
	if m.viewed_ip != nil {
		fields = append(fields, sharedlink.FieldViewedIP)
	}
	if m.revoked != nil {
		fields = append(fields, sharedlink.FieldRevoked)
	}
	return fields
}

// Field returns the value of a field with the given name. The second boolean
// return value indicates that this field was not set, or was not defined in the
// schema.
func (m *SharedLinkMutation) Field(name string) (ent.Value, bool) {
	switch name {
	case sharedlink.FieldCreateBy:
		return m.CreateBy()
	case sharedlink.FieldCreateTime:
		return m.CreateTime()
	case sharedlink.FieldUpdateTime:
		return m.UpdateTime()
	case sharedlink.FieldDeleteTime:
		return m.DeleteTime()
	case sharedlink.FieldTenantID:
		return m.TenantID()
	case sharedlink.FieldResourceType:
		return m.ResourceType()
	case sharedlink.FieldResourceID:
		return m.ResourceID()
	case sharedlink.FieldResourceName:
		return m.ResourceName()
	case sharedlink.FieldToken:
		return m.Token()
	case sharedlink.FieldEncryptedContent:
		return m.EncryptedContent()
	case sharedlink.FieldEncryptionNonce:
		return m.EncryptionNonce()
	case sharedlink.FieldRecipientEmail:
		return m.RecipientEmail()
	case sharedlink.FieldMessage:
		return m.Message()
	case sharedlink.FieldTemplateID:
		return m.TemplateID()
	case sharedlink.FieldViewed:
		return m.Viewed()
	case sharedlink.FieldViewedAt:
		return m.ViewedAt()
	case sharedlink.FieldViewedIP:
		return m.ViewedIP()
	case sharedlink.FieldRevoked:
		return m.Revoked()
	}
	return nil, false
}

// OldField returns the old value of the field from the database. An error is
// returned if the mutation operation is not UpdateOne, or the query to the
// database failed.
func (m *SharedLinkMutation) OldField(ctx context.Context, name string) (ent.Value, error) {
	switch name {
	case sharedlink.FieldCreateBy:
		return m.OldCreateBy(ctx)
	case sharedlink.FieldCreateTime:
		return m.OldCreateTime(ctx)
	case sharedlink.FieldUpdateTime:
		return m.OldUpdateTime(ctx)
	case sharedlink.FieldDeleteTime:
		return m.OldDeleteTime(ctx)
	case sharedlink.FieldTenantID:
		return m.OldTenantID(ctx)
	case sharedlink.FieldResourceType:
		return m.OldResourceType(ctx)
	case sharedlink.FieldResourceID:
		return m.OldResourceID(ctx)
	case sharedlink.FieldResourceName:
		return m.OldResourceName(ctx)
	case sharedlink.FieldToken:
		return m.OldToken(ctx)
	case sharedlink.FieldEncryptedContent:
		return m.OldEncryptedContent(ctx)
	case sharedlink.FieldEncryptionNonce:
		return m.OldEncryptionNonce(ctx)
	case sharedlink.FieldRecipientEmail:
		return m.OldRecipientEmail(ctx)
	case sharedlink.FieldMessage:
		return m.OldMessage(ctx)
	case sharedlink.FieldTemplateID:
		return m.OldTemplateID(ctx)
	case sharedlink.FieldViewed:
		return m.OldViewed(ctx)
	case sharedlink.FieldViewedAt:
		return m.OldViewedAt(ctx)
	case sharedlink.FieldViewedIP:
		return m.OldViewedIP(ctx)
	case sharedlink.FieldRevoked:
		return m.OldRevoked(ctx)
	}
	return nil, fmt.Errorf("unknown SharedLink field %s", name)
}

// SetField sets the value of a field with the given name. It returns an error if
// the field is not defined in the schema, or if the type mismatched the field
// type.
func (m *SharedLinkMutation) SetField(name string, value ent.Value) error {
	switch name {
	case sharedlink.FieldCreateBy:
		v, ok := value.(uint32)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetCreateBy(v)
		return nil
	case sharedlink.FieldCreateTime:
		v, ok := value.(time.Time)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetCreateTime(v)
		return nil
	case sharedlink.FieldUpdateTime:
		v, ok := value.(time.Time)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetUpdateTime(v)
		return nil
	case sharedlink.FieldDeleteTime:
		v, ok := value.(time.Time)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetDeleteTime(v)
		return nil
	case sharedlink.FieldTenantID:
		v, ok := value.(uint32)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetTenantID(v)
		return nil
	case sharedlink.FieldResourceType:
		v, ok := value.(sharedlink.ResourceType)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetResourceType(v)
		return nil
	case sharedlink.FieldResourceID:
		v, ok := value.(string)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetResourceID(v)
		return nil
	case sharedlink.FieldResourceName:
		v, ok := value.(string)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetResourceName(v)
		return nil
	case sharedlink.FieldToken:
		v, ok := value.(string)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetToken(v)
		return nil
	case sharedlink.FieldEncryptedContent:
		v, ok := value.([]byte)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetEncryptedContent(v)
		return nil
	case sharedlink.FieldEncryptionNonce:
		v, ok := value.([]byte)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetEncryptionNonce(v)
		return nil
	case sharedlink.FieldRecipientEmail:
		v, ok := value.(string)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetRecipientEmail(v)
		return nil
	case sharedlink.FieldMessage:
		v, ok := value.(string)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetMessage(v)
		return nil
	case sharedlink.FieldTemplateID:
		v, ok := value.(string)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetTemplateID(v)
		return nil
	case sharedlink.FieldViewed:
		v, ok := value.(bool)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetViewed(v)
		return nil
	case sharedlink.FieldViewedAt:
		v, ok := value.(time.Time)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetViewedAt(v)
		return nil
	case sharedlink.FieldViewedIP:
		v, ok := value.(string)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetViewedIP(v)
		return nil
	case sharedlink.FieldRevoked:
		v, ok := value.(bool)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.SetRevoked(v)
		return nil
	}
	return fmt.Errorf("unknown SharedLink field %s", name)
}

// AddedFields returns all numeric fields that were incremented/decremented during
// this mutation.
func (m *SharedLinkMutation) AddedFields() []string {
	var fields []string
	if m.addcreate_by != nil {
		fields = append(fields, sharedlink.FieldCreateBy)
	}
	if m.addtenant_id != nil {
		fields = append(fields, sharedlink.FieldTenantID)
	}
	return fields
}

// AddedField returns the numeric value that was incremented/decremented on a field
// with the given name. The second boolean return value indicates that this field
// was not set, or was not defined in the schema.
func (m *SharedLinkMutation) AddedField(name string) (ent.Value, bool) {
	switch name {
	case sharedlink.FieldCreateBy:
		return m.AddedCreateBy()
	case sharedlink.FieldTenantID:
		return m.AddedTenantID()
	}
	return nil, false
}

// AddField adds the value to the field with the given name. It returns an error if
// the field is not defined in the schema, or if the type mismatched the field
// type.
func (m *SharedLinkMutation) AddField(name string, value ent.Value) error {
	switch name {
	case sharedlink.FieldCreateBy:
		v, ok := value.(int32)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.AddCreateBy(v)
		return nil
	case sharedlink.FieldTenantID:
		v, ok := value.(int32)
		if !ok {
			return fmt.Errorf("unexpected type %T for field %s", value, name)
		}
		m.AddTenantID(v)
		return nil
	}
	return fmt.Errorf("unknown SharedLink numeric field %s", name)
}

// ClearedFields returns all nullable fields that were cleared during this
// mutation.
func (m *SharedLinkMutation) ClearedFields() []string {
	var fields []string
	if m.FieldCleared(sharedlink.FieldCreateBy) {
		fields = append(fields, sharedlink.FieldCreateBy)
	}
	if m.FieldCleared(sharedlink.FieldCreateTime) {
		fields = append(fields, sharedlink.FieldCreateTime)
	}
	if m.FieldCleared(sharedlink.FieldUpdateTime) {
		fields = append(fields, sharedlink.FieldUpdateTime)
	}
	if m.FieldCleared(sharedlink.FieldDeleteTime) {
		fields = append(fields, sharedlink.FieldDeleteTime)
	}
	if m.FieldCleared(sharedlink.FieldTenantID) {
		fields = append(fields, sharedlink.FieldTenantID)
	}
	if m.FieldCleared(sharedlink.FieldEncryptedContent) {
		fields = append(fields, sharedlink.FieldEncryptedContent)
	}
	if m.FieldCleared(sharedlink.FieldEncryptionNonce) {
		fields = append(fields, sharedlink.FieldEncryptionNonce)
	}
	if m.FieldCleared(sharedlink.FieldMessage) {
		fields = append(fields, sharedlink.FieldMessage)
	}
	if m.FieldCleared(sharedlink.FieldTemplateID) {
		fields = append(fields, sharedlink.FieldTemplateID)
	}
	if m.FieldCleared(sharedlink.FieldViewedAt) {
		fields = append(fields, sharedlink.FieldViewedAt)
	}
	if m.FieldCleared(sharedlink.FieldViewedIP) {
		fields = append(fields, sharedlink.FieldViewedIP)
	}
	return fields
}

// FieldCleared returns a boolean indicating if a field with the given name was
// cleared in this mutation.
func (m *SharedLinkMutation) FieldCleared(name string) bool {
	_, ok := m.clearedFields[name]
	return ok
}

// ClearField clears the value of the field with the given name. It returns an
// error if the field is not defined in the schema.
func (m *SharedLinkMutation) ClearField(name string) error {
	switch name {
	case sharedlink.FieldCreateBy:
		m.ClearCreateBy()
		return nil
	case sharedlink.FieldCreateTime:
		m.ClearCreateTime()
		return nil
	case sharedlink.FieldUpdateTime:
		m.ClearUpdateTime()
		return nil
	case sharedlink.FieldDeleteTime:
		m.ClearDeleteTime()
		return nil
	case sharedlink.FieldTenantID:
		m.ClearTenantID()
		return nil
	case sharedlink.FieldEncryptedContent:
		m.ClearEncryptedContent()
		return nil
	case sharedlink.FieldEncryptionNonce:
		m.ClearEncryptionNonce()
		return nil
	case sharedlink.FieldMessage:
		m.ClearMessage()
		return nil
	case sharedlink.FieldTemplateID:
		m.ClearTemplateID()
		return nil
	case sharedlink.FieldViewedAt:
		m.ClearViewedAt()
		return nil
	case sharedlink.FieldViewedIP:
		m.ClearViewedIP()
		return nil
	}
	return fmt.Errorf("unknown SharedLink nullable field %s", name)
}

// ResetField resets all changes in the mutation for the field with the given name.
// It returns an error if the field is not defined in the schema.
func (m *SharedLinkMutation) ResetField(name string) error {
	switch name {
	case sharedlink.FieldCreateBy:
		m.ResetCreateBy()
		return nil
	case sharedlink.FieldCreateTime:
		m.ResetCreateTime()
		return nil
	case sharedlink.FieldUpdateTime:
		m.ResetUpdateTime()
		return nil
	case sharedlink.FieldDeleteTime:
		m.ResetDeleteTime()
		return nil
	case sharedlink.FieldTenantID:
		m.ResetTenantID()
		return nil
	case sharedlink.FieldResourceType:
		m.ResetResourceType()
		return nil
	case sharedlink.FieldResourceID:
		m.ResetResourceID()
		return nil
	case sharedlink.FieldResourceName:
		m.ResetResourceName()
		return nil
	case sharedlink.FieldToken:
		m.ResetToken()
		return nil
	case sharedlink.FieldEncryptedContent:
		m.ResetEncryptedContent()
		return nil
	case sharedlink.FieldEncryptionNonce:
		m.ResetEncryptionNonce()
		return nil
	case sharedlink.FieldRecipientEmail:
		m.ResetRecipientEmail()
		return nil
	case sharedlink.FieldMessage:
		m.ResetMessage()
		return nil
	case sharedlink.FieldTemplateID:
		m.ResetTemplateID()
		return nil
	case sharedlink.FieldViewed:
		m.ResetViewed()
		return nil
	case sharedlink.FieldViewedAt:
		m.ResetViewedAt()
		return nil
	case sharedlink.FieldViewedIP:
		m.ResetViewedIP()
		return nil
	case sharedlink.FieldRevoked:
		m.ResetRevoked()
		return nil
	}
	return fmt.Errorf("unknown SharedLink field %s", name)
}

// AddedEdges returns all edge names that were set/added in this mutation.
func (m *SharedLinkMutation) AddedEdges() []string {
	edges := make([]string, 0, 0)
	return edges
}

// AddedIDs returns all IDs (to other nodes) that were added for the given edge
// name in this mutation.
func (m *SharedLinkMutation) AddedIDs(name string) []ent.Value {
	return nil
}

// RemovedEdges returns all edge names that were removed in this mutation.
func (m *SharedLinkMutation) RemovedEdges() []string {
	edges := make([]string, 0, 0)
	return edges
}

// RemovedIDs returns all IDs (to other nodes) that were removed for the edge with
// the given name in this mutation.
func (m *SharedLinkMutation) RemovedIDs(name string) []ent.Value {
	return nil
}

// ClearedEdges returns all edge names that were cleared in this mutation.
func (m *SharedLinkMutation) ClearedEdges() []string {
	edges := make([]string, 0, 0)
	return edges
}

// EdgeCleared returns a boolean which indicates if the edge with the given name
// was cleared in this mutation.
func (m *SharedLinkMutation) EdgeCleared(name string) bool {
	return false
}

// ClearEdge clears the value of the edge with the given name. It returns an error
// if that edge is not defined in the schema.
func (m *SharedLinkMutation) ClearEdge(name string) error {
	return fmt.Errorf("unknown SharedLink unique edge %s", name)
}

// ResetEdge resets all changes to the edge with the given name in this mutation.
// It returns an error if the edge is not defined in the schema.
func (m *SharedLinkMutation) ResetEdge(name string) error {
	return fmt.Errorf("unknown SharedLink edge %s", name)
}
